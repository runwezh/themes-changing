# Themes Changing 插件调试步骤

## 如果命令还是报错，请按以下步骤调试：

### 1. 检查插件是否激活

在 VS Code 中：
1. 按 `Cmd+Shift+P` 打开命令面板
2. 输入 "Developer: Show Running Extensions"
3. 查找 "Themes Changing" 插件
4. 检查状态是否为 "Activated"

### 2. 查看插件输出日志

1. 按 `Cmd+Shift+P` 打开命令面板
2. 输入 "Developer: Toggle Developer Tools"
3. 切换到 "Console" 标签
4. 查找是否有错误信息
5. 尝试执行命令，看是否有新的错误

### 3. 检查插件版本

在终端执行：
```bash
code --list-extensions --show-versions | grep themes-changing
```

应该显示：
```
alfredzhao.themes-changing@0.2.1
```

### 4. 检查安装的 package.json

在终端执行：
```bash
cat ~/.vscode/extensions/alfredzhao.themes-changing-0.2.1/package.json | grep -A 5 "activationEvents"
```

应该包含：
```json
"activationEvents": [
  "onStartupFinished",
  "onCommand:themes-changing.openSettings",
  "onCommand:themes-changing.toggleStatus",
  "onCommand:themes-changing.updateConfig"
]
```

### 5. 手动触发插件激活

在 VS Code 中：
1. 按 `Cmd+Shift+P` 打开命令面板
2. 先执行 "Themes Changing: Toggle Theme Switching"
3. 这会触发插件激活
4. 然后再尝试 "Themes Changing: Open Theme Settings"

### 6. 完全重新安装

如果以上都不行，尝试完全重新安装：

```bash
# 1. 卸载插件
code --uninstall-extension alfredzhao.themes-changing

# 2. 删除插件目录
rm -rf ~/.vscode/extensions/alfredzhao.themes-changing-*

# 3. 清理缓存
rm -rf ~/Library/Application\ Support/Code/CachedExtensions
rm -rf ~/Library/Application\ Support/Code/CachedExtensionVSIXs

# 4. 完全关闭 VS Code
killall "Visual Studio Code" "Code Helper"

# 5. 重新安装
cd /Users/zhaohua/study/vs-plugin/AlfredChanging
code --install-extension themes-changing-0.2.1.vsix

# 6. 启动 VS Code
open -a "Visual Studio Code"
```

### 7. 检查是否有冲突的插件

1. 禁用所有其他插件
2. 只保留 Themes Changing
3. 重启 VS Code
4. 测试命令是否工作

### 8. 使用开发模式测试

在项目目录中：
1. 按 `F5` 启动调试模式
2. 会打开一个新的 VS Code 窗口（Extension Development Host）
3. 在新窗口中测试命令
4. 查看原窗口的调试控制台是否有错误

### 9. 检查 VS Code 版本

确保 VS Code 版本 >= 1.60.0：
```bash
code --version
```

### 10. 查看扩展主机日志

1. 按 `Cmd+Shift+P` 打开命令面板
2. 输入 "Developer: Show Logs"
3. 选择 "Extension Host"
4. 查找与 themes-changing 相关的错误

---

## 常见问题

### Q: 为什么会出现 "command not found" 错误？

A: 可能的原因：
1. 插件未激活
2. VS Code 缓存了旧版本
3. activationEvents 配置不正确
4. 命令注册失败

### Q: 如何确认插件已正确安装？

A: 检查以下几点：
1. `code --list-extensions` 显示正确版本
2. `~/.vscode/extensions/` 目录中有对应文件夹
3. package.json 中的 activationEvents 包含所需命令
4. "Show Running Extensions" 显示插件已激活

### Q: 为什么需要清理缓存？

A: VS Code 会缓存扩展的元数据，包括命令列表。如果不清理缓存，可能会使用旧版本的配置。

---

## 联系支持

如果以上步骤都无法解决问题，请提供以下信息：

1. VS Code 版本
2. 操作系统版本
3. 插件版本（`code --list-extensions --show-versions | grep themes-changing`）
4. 开发者工具中的错误日志
5. 扩展主机日志中的相关信息

在 GitHub 上提交 Issue：
https://github.com/runwezh/themes-changing/issues

